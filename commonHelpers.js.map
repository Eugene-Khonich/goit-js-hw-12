{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst axiosOptions = {\n  params: {\n    key: '45505147-33e194e8689097e70f28421cd',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n  },\n};\nexport async function fetchPhotos(searchValue, page) {\n  axiosOptions.params.q = searchValue;\n  axiosOptions.params.page = page;\n  const resp = await axios.get('', axiosOptions);\n  return resp.data;\n}\n","const galleryList = document.querySelector('.gallery-list');\n\nexport const greateCards = imgInfo => {\n  const imgValues = imgInfo\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"gallery-image-stats\">\n            <ul class=\"gallery-image-stats-list\">\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Likes</p>\n                <p class=\"gallery-image-stats-text\">${likes}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Views</p>\n                <p class=\"gallery-image-stats-text\">${views}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Comments</p>\n                <p class=\"gallery-image-stats-text\">${comments}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Downloads</p>\n                <p class=\"gallery-image-stats-text\">${downloads}</p>\n              </li>\n            </ul>\n          </div>\n        </a>\n      </li>`;\n      }\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', imgValues);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { greateCards } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nconst lightBox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nlet value = '';\nlet page = 1;\nlet cardHeight = 0;\nlet totalPages = 0;\nlet perPage = 15;\n\nconst onSearchSubmit = async e => {\n  e.preventDefault();\n  loader.classList.remove('hidden');\n  value = e.target.elements.inputField.value.toLowerCase().trim();\n  page = 1;\n  if (!value) {\n    iziToast.error({\n      title: 'Error',\n      message: 'You need to type something on field!',\n      position: 'topRight',\n    });\n    return;\n  }\n  try {\n    const response = await fetchPhotos(value, page);\n    if (response.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loader.classList.add('hidden');\n      loadMore.classList.add('hidden');\n      galleryList.innerHTML = '';\n      form.reset();\n      return;\n    } else {\n      galleryList.innerHTML = '';\n      greateCards(response.hits);\n      lightBox.refresh();\n      loader.classList.add('hidden');\n      loadMore.classList.remove('hidden');\n    }\n  } catch (err) {\n    iziToast.error({\n      message: `There is an Error ${err}. Try again!`,\n      position: 'topRight',\n    });\n  }\n};\n\nconst onLoadMoreClick = async e => {\n  try {\n    page += 1;\n    loadMore.classList.add('hidden');\n    loader.classList.remove('hidden');\n    const response = await fetchPhotos(value, page);\n    greateCards(response.hits);\n    lightBox.refresh();\n    totalPages = response.totalHits;\n    if (page * perPage >= totalPages) {\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loadMore.classList.add('hidden');\n      loader.classList.add('hidden');\n      lightBox.refresh();\n      return;\n    }\n    const galleryCard = galleryList.querySelector('.gallery-item');\n    cardHeight = galleryCard.getBoundingClientRect().height;\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    loader.classList.add('hidden');\n    loadMore.classList.remove('hidden');\n    lightBox.refresh();\n  } catch (err) {\n    iziToast.error({\n      message: `There is an Error ${err}. Try again!`,\n      position: 'topRight',\n    });\n  }\n};\n\nform.addEventListener('submit', onSearchSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n"],"names":["axios","axiosOptions","fetchPhotos","searchValue","page","galleryList","greateCards","imgInfo","imgValues","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","loadMore","lightBox","SimpleLightbox","value","cardHeight","totalPages","perPage","onSearchSubmit","e","iziToast","response","err","onLoadMoreClick"],"mappings":"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"}